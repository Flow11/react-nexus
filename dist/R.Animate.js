"use strict";

require("6to5/polyfill");
var Promise = require("bluebird");
module.exports = function (R) {
  var _ = R._;
  var should = R.should;
  var d3 = require("d3");
  var InterpolationTicker = require("./R.Animate.InterpolationTicker")(R);

  var Animate = {
    Mixin: {
      _AnimateMixin: true,
      _AnimateMixinInterpolationTickers: null,

      componentWillMount: function () {
        this._AnimateMixinInterpolationTickers = {};
      },

      componentWillUnmount: function () {
        var _this = this;
        Object.keys(this._AnimateMixinInterpolationTickers).forEach(function (name) {
          return _this._AnimateMixinInterpolationTickers[name].abort();
        });
        this._AnimateMixinInterpolationTickers = null;
      },

      isAnimating: function (name) {
        return this._AnimateMixinInterpolationTickers[name];
      },

      _AnimateMixinGetStateKey: function (name) {
        return "_AnimateMixinStyle-" + name;
      },

      getAnimatedStyle: function (name) {
        if (this.isAnimating(name)) {
          return this.state[this._AnimateMixinGetStateKey(name)];
        } else {
          _.dev(function () {
            return console.warn("R.Animate.Mixin.getAnimatedStyle(...): no such animation.");
          });
          return {};
        }
      },

      abortAnimation: function (name) {
        var _this2 = this;
        _.dev(function () {
          return _this2.isAnimating(name).should.be.ok;
        });
        if (this.isAnimating(name)) {
          this._AnimateMixinInterpolationTickers[name].abort();
        }
      },

      animate: function (name, params) {
        var _this3 = this;
        if (this.isAnimating(name)) {
          this.abortAnimation(name);
        }

        params = _.extend({}, params, {
          onTick: _.noop,
          onComplete: _.noop,
          onAbort: _.noop });

        var original = {
          onTick: params.onTick,
          onComplete: params.onComplete,
          onAbort: params.onAbort };

        params.onTick = function (animatedStyle, t) {
          original.onTick(animatedStyle, t);
          _this3.setStateIfMounted((function (_ref) {
            _ref[_this3._AnimateMixinGetStateKey(name)] = animatedStyle;
            return _ref;
          })({}));
        };

        params.onComplete = function (animatedStyle, t) {
          original.onComplete(animatedStyle, t);
          delete _this3._AnimateMixinInterpolationTickers[name];
          _this3.setStateIfMounted((function (_ref2) {
            _ref2[_this3._AnimateMixinGetStateKey(name)] = void 0;
            return _ref2;
          })({}));
        };

        params.onAbort = function () {
          original.onAbort();
          delete _this3._AnimateMixinInterpolationTickers[name];
          _this3.setStateIfMounted((function (_ref3) {
            _ref3[_this3._AnimateMixinGetStateKey(name)] = void 0;
            return _ref3;
          })({}));
        };

        var interpolationTicker = new R.Animate.InterpolationTicker(params);
        this._AnimateMixinInterpolationTickers[name] = interpolationTicker;
        interpolationTicker.start();
      } },

    createInterpolator: function (from, to) {
      return d3.interpolate(from, to);
    },

    createEasing: function (type, params) {
      if (params) {
        var args = _.clone(params);
        args.unshift(type);
        return d3.ease.apply(d3, args);
      } else {
        return d3.ease(type);
      }
    },

    InterpolationTicker: InterpolationTicker,

    shouldEnableHA: function () {
      if (_.isClient()) {
        var userAgent = navigator.userAgent;
        var isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(userAgent);
        var isGingerbread = /Android 2\.3\.[3-7]/i.test(userAgent);
        return userAgent && isMobile && !isGingerbread;
      } else {
        return true;
      }
    } };

  return Animate;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImc6L3JlYWN0LW5leHVzL3JlYWN0LXJhaWxzL3NyYy9SLkFuaW1hdGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxPQUFPLENBQUMsZUFBZSxDQUFDLENBQUM7QUFDekIsSUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ3BDLE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBUyxDQUFDLEVBQUU7QUFDM0IsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNkLE1BQU0sTUFBTSxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUM7QUFDeEIsTUFBTSxFQUFFLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3pCLE1BQU0sbUJBQW1CLEdBQUcsT0FBTyxDQUFDLGlDQUFpQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7O0FBRTFFLE1BQU0sT0FBTyxHQUFHO0FBQ2QsU0FBSyxFQUFFO0FBQ0wsbUJBQWEsRUFBRSxJQUFJO0FBQ25CLHVDQUFpQyxFQUFFLElBQUk7O0FBRXZDLHdCQUFrQixFQUFBLFlBQUc7QUFDbkIsWUFBSSxDQUFDLGlDQUFpQyxHQUFHLEVBQUUsQ0FBQztPQUM3Qzs7QUFFRCwwQkFBb0IsRUFBQSxZQUFHOztBQUNyQixjQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxpQ0FBaUMsQ0FBQyxDQUNsRCxPQUFPLENBQUMsVUFBQyxJQUFJO2lCQUFLLE1BQUssaUNBQWlDLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxFQUFFO1NBQUEsQ0FBQyxDQUFDO0FBQ3pFLFlBQUksQ0FBQyxpQ0FBaUMsR0FBRyxJQUFJLENBQUM7T0FDL0M7O0FBRUQsaUJBQVcsRUFBQSxVQUFDLElBQUksRUFBRTtBQUNoQixlQUFPLElBQUksQ0FBQyxpQ0FBaUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztPQUNyRDs7QUFFRCw4QkFBd0IsRUFBQSxVQUFDLElBQUksRUFBRTtBQUM3QixlQUFPLHFCQUFxQixHQUFH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QUFFRCxzQkFBa0IsRUFBQSxVQUFDLElBQUksRUFBRSxFQUFFLEVBQUU7QUFDM0IsYUFBTyxFQUFFLENBQUMsV0FBVyxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsQ0FBQztLQUNqQzs7QUFFRCxnQkFBWSxFQUFBLFVBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRTtBQUN6QixVQUFHLE1BQU0sRUFBRTtBQUNULFlBQUksSUFBSSxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDM0IsWUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNuQixlQUFPLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQztPQUNoQyxNQUNJO0FBQ0gsZUFBTyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO09BQ3RCO0tBQ0Y7O0FBRUQsdUJBQW1CLEVBQW5CLG1CQUFtQjs7QUFFbkIsa0JBQWMsRUFBQSxZQUFHO0FBQ2YsVUFBRyxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUU7QUFDZixZQUFJLFNBQVMsR0FBRyxTQUFTLENBQUMsU0FBUyxDQUFDO0FBQ3BDLFlBQUksUUFBUSxHQUFHLGdFQUFnRSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUNoRyxZQUFJLGFBQWEsR0FBRyxzQkFBc0IsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDM0QsZUFBTyxTQUFTLElBQUksUUFBUSxJQUFJLENBQUMsYUFBYSxDQUFDO09BQ2hELE1BQ0k7QUFDSCxlQUFPLElBQUksQ0FBQztPQUNiO0tBQ0YsRUFDRixDQUFDOztBQUVGLFNBQU8sT0FBTyxDQUFDO0NBQ2hCLENBQUMiLCJmaWxlIjoiUi5BbmltYXRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsicmVxdWlyZSgnNnRvNS9wb2x5ZmlsbCcpO1xuY29uc3QgUHJvbWlzZSA9IHJlcXVpcmUoJ2JsdWViaXJkJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFIpIHtcclxuICBjb25zdCBfID0gUi5fO1xyXG4gIGNvbnN0IHNob3VsZCA9IFIuc2hvdWxkO1xyXG4gIGNvbnN0IGQzID0gcmVxdWlyZSgnZDMnKTtcclxuICBjb25zdCBJbnRlcnBvbGF0aW9uVGlja2VyID0gcmVxdWlyZSgnLi9SLkFuaW1hdGUuSW50ZXJwb2xhdGlvblRpY2tlcicpKFIpO1xyXG5cclxuICBjb25zdCBBbmltYXRlID0ge1xyXG4gICAgTWl4aW46IHtcclxuICAgICAgX0FuaW1hdGVNaXhpbjogdHJ1ZSxcclxuICAgICAgX0FuaW1hdGVNaXhpbkludGVycG9sYXRpb25UaWNrZXJzOiBudWxsLFxyXG5cclxuICAgICAgY29tcG9uZW50V2lsbE1vdW50KCkge1xyXG4gICAgICAgIHRoaXMuX0FuaW1hdGVNaXhpbkludGVycG9sYXRpb25UaWNrZXJzID0ge307XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcclxuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLl9BbmltYXRlTWl4aW5JbnRlcnBvbGF0aW9uVGlja2VycylcclxuICAgICAgICAuZm9yRWFjaCgobmFtZSkgPT4gdGhpcy5fQW5pbWF0ZU1peGluSW50ZXJwb2xhdGlvblRpY2tlcnNbbmFtZV0uYWJvcnQoKSk7XHJcbiAgICAgICAgdGhpcy5fQW5pbWF0ZU1peGluSW50ZXJwb2xhdGlvblRpY2tlcnMgPSBudWxsO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgaXNBbmltYXRpbmcobmFtZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9BbmltYXRlTWl4aW5JbnRlcnBvbGF0aW9uVGlja2Vyc1tuYW1lXTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIF9BbmltYXRlTWl4aW5HZXRTdGF0ZUtleShuYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuICdfQW5pbWF0ZU1peGluU3R5bGUtJyArIG5hbWU7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBnZXRBbmltYXRlZFN0eWxlKG5hbWUpIHtcclxuICAgICAgICBpZih0aGlzLmlzQW5pbWF0aW5nKG5hbWUpKSB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZVt0aGlzLl9BbmltYXRlTWl4aW5HZXRTdGF0ZUtleShuYW1lKV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgXy5kZXYoKCkgPT4gY29uc29sZS53YXJuKCdSLkFuaW1hdGUuTWl4aW4uZ2V0QW5pbWF0ZWRTdHlsZSguLi4pOiBubyBzdWNoIGFuaW1hdGlvbi4nKSk7XHJcbiAgICAgICAgICByZXR1cm4ge307XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgYWJvcnRBbmltYXRpb24obmFtZSkge1xyXG4gICAgICAgIF8uZGV2KCgpID0+IHRoaXMuaXNBbmltYXRpbmcobmFtZSkuc2hvdWxkLmJlLm9rKTtcclxuICAgICAgICBpZih0aGlzLmlzQW5pbWF0aW5nKG5hbWUpKSB7XHJcbiAgICAgICAgICB0aGlzLl9BbmltYXRlTWl4aW5JbnRlcnBvbGF0aW9uVGlja2Vyc1tuYW1lXS5hYm9ydCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuXHJcbiAgICAgIGFuaW1hdGUobmFtZSwgcGFyYW1zKSB7XHJcbiAgICAgICAgaWYodGhpcy5pc0FuaW1hdGluZyhuYW1lKSkge1xyXG4gICAgICAgICAgdGhpcy5hYm9ydEFuaW1hdGlvbihuYW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHBhcmFtcyA9IF8uZXh0ZW5kKHt9LCBwYXJhbXMsIHtcclxuICAgICAgICAgIG9uVGljazogXy5ub29wLFxyXG4gICAgICAgICAgb25Db21wbGV0ZTogXy5ub29wLFxyXG4gICAgICAgICAgb25BYm9ydDogXy5ub29wLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsZXQgb3JpZ2luYWwgPSB7XHJcbiAgICAgICAgICBvblRpY2s6IHBhcmFtcy5vblRpY2ssXHJcbiAgICAgICAgICBvbkNvbXBsZXRlOiBwYXJhbXMub25Db21wbGV0ZSxcclxuICAgICAgICAgIG9uQWJvcnQ6IHBhcmFtcy5vbkFib3J0LFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHBhcmFtcy5vblRpY2sgPSAoYW5pbWF0ZWRTdHlsZSwgdCkgPT4ge1xyXG4gICAgICAgICAgb3JpZ2luYWwub25UaWNrKGFuaW1hdGVkU3R5bGUsIHQpO1xyXG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZUlmTW91bnRlZCh7IFt0aGlzLl9BbmltYXRlTWl4aW5HZXRTdGF0ZUtleShuYW1lKV06IGFuaW1hdGVkU3R5bGUgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcGFyYW1zLm9uQ29tcGxldGUgPSAoYW5pbWF0ZWRTdHlsZSwgdCkgPT4ge1xyXG4gICAgICAgICAgb3JpZ2luYWwub25Db21wbGV0ZShhbmltYXRlZFN0eWxlLCB0KTtcclxuICAgICAgICAgIGRlbGV0ZSB0aGlzLl9BbmltYXRlTWl4aW5JbnRlcnBvbGF0aW9uVGlja2Vyc1tuYW1lXTtcclxuICAgICAgICAgIHRoaXMuc2V0U3RhdGVJZk1vdW50ZWQoeyBbdGhpcy5fQW5pbWF0ZU1peGluR2V0U3RhdGVLZXkobmFtZSldOiB2b2lkIDAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcGFyYW1zLm9uQWJvcnQgPSAoKSA9PiB7XHJcbiAgICAgICAgICBvcmlnaW5hbC5vbkFib3J0KCk7XHJcbiAgICAgICAgICBkZWxldGUgdGhpcy5fQW5pbWF0ZU1peGluSW50ZXJwb2xhdGlvblRpY2tlcnNbbmFtZV07XHJcbiAgICAgICAgICB0aGlzLnNldFN0YXRlSWZNb3VudGVkKHsgW3RoaXMuX0FuaW1hdGVNaXhpbkdldFN0YXRlS2V5KG5hbWUpXTogdm9pZCAwIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGxldCBpbnRlcnBvbGF0aW9uVGlja2VyID0gbmV3IFIuQW5pbWF0ZS5JbnRlcnBvbGF0aW9uVGlja2VyKHBhcmFtcyk7XHJcbiAgICAgICAgdGhpcy5fQW5pbWF0ZU1peGluSW50ZXJwb2xhdGlvblRpY2tlcnNbbmFtZV0gPSBpbnRlcnBvbGF0aW9uVGlja2VyO1xyXG4gICAgICAgIGludGVycG9sYXRpb25UaWNrZXIuc3RhcnQoKTtcclxuICAgICAgfSxcclxuICAgIH0sXHJcblxyXG4gICAgY3JlYXRlSW50ZXJwb2xhdG9yKGZyb20sIHRvKSB7XHJcbiAgICAgIHJldHVybiBkMy5pbnRlcnBvbGF0ZShmcm9tLCB0byk7XHJcbiAgICB9LFxyXG5cclxuICAgIGNyZWF0ZUVhc2luZyh0eXBlLCBwYXJhbXMpIHtcclxuICAgICAgaWYocGFyYW1zKSB7XHJcbiAgICAgICAgbGV0IGFyZ3MgPSBfLmNsb25lKHBhcmFtcyk7XHJcbiAgICAgICAgYXJncy51bnNoaWZ0KHR5cGUpO1xyXG4gICAgICAgIHJldHVybiBkMy5lYXNlLmFwcGx5KGQzLCBhcmdzKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gZDMuZWFzZSh0eXBlKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBJbnRlcnBvbGF0aW9uVGlja2VyLFxyXG5cclxuICAgIHNob3VsZEVuYWJsZUhBKCkge1xyXG4gICAgICBpZihfLmlzQ2xpZW50KCkpIHtcclxuICAgICAgICBsZXQgdXNlckFnZW50ID0gbmF2aWdhdG9yLnVzZXJBZ2VudDtcclxuICAgICAgICBsZXQgaXNNb2JpbGUgPSAvQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8SUVNb2JpbGV8T3BlcmEgTWluaS9pLnRlc3QodXNlckFnZW50KTtcclxuICAgICAgICBsZXQgaXNHaW5nZXJicmVhZCA9IC9BbmRyb2lkIDJcXC4zXFwuWzMtN10vaS50ZXN0KHVzZXJBZ2VudCk7XHJcbiAgICAgICAgcmV0dXJuIHVzZXJBZ2VudCAmJiBpc01vYmlsZSAmJiAhaXNHaW5nZXJicmVhZDtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICB9O1xyXG5cclxuICByZXR1cm4gQW5pbWF0ZTtcclxufTtcclxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9