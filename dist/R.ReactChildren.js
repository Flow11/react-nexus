"use strict";

require("6to5/polyfill");
var Promise = require("bluebird");
module.exports = function (R) {
  var _ = require("lodash");
  var React = R.React;

  var _vanillaReactChildren = React.Children;
  /**
  * <p>Method definitions that complements React.Children. <br />
  * Used to navigate through all children of a specific component in order to calculate its descendants. </p>
  * @class R.ReactChildren
  */
  var _patchedReactChildren = _.extend({}, React.Children, {
    /**
    * <p>Returns the child of the specified component </p>
    * @method getChildrenList
    * @param {object} component The current component 
    * @return {object} object The child of the specified component
    */
    getChildrenList: function getChildrenList(component) {
      if (null === component || !component.props || !component.props.children) {
        return [];
      }
      return React.Children.map(component.props.children, _.identity);
    },
    /**
    * <p>Returns all children of the specified component </p>
    * @method getDescendantsList
    * @param {object} component The current component 
    * @return {object} descendantsList The list of children of the specified component
    */
    getDescendantsList: function getDescendantsList(component) {
      var childrenList = React.Children.getChildrenList(component);
      var descendantsList = [];
      _.each(childrenList, function (child) {
        descendantsList.push(child);
        var subDescendantsList = React.Children.getDescendantsList(child);
        _.each(subDescendantsList, function (node) {
          descendantsList.push(node);
        });
      });
      return descendantsList;
    },
    /**
    * <p>Returns all children of the specified component and execute the specified function </p>
    * @method mapDescendants
    * @param {object} component The current component 
    * @param {Function} fn The function to execute 
    * @return {object} object The list of children of the specified component
    */
    mapDescendants: function mapDescendants(component, fn) {
      return _.map(React.Children.getDescendantsList(component), fn);
    },
    /**
     * <p>Compute all children of the specified component and execute the function </p>
     * @method mapTree
     * @param {object} component The current component 
     * @param {Function} fn The function to execute
     * @return {object} object The list of children without the component and call fn for each of them
     */
    mapTree: function mapTree(component, fn) {
      var tree = React.Children.getDescendantsList(component, fn);
      tree.unshift(component);
      return _.map(tree, fn);
    },
    /**
    * <p> Function to use if you want restore native function of React.Children </p>
    * @method restoreVanillaChildren
    */
    restoreVanillaChildren: function restoreVanillaChildren() {
      React.Children = _vanillaReactChildren;
    },
    /**
    * <p> Function to use if you want convert all the descendants of the component using a specified function </p>  
    * @method transformDescendants
    * @param {object} component The current component 
    * @param {Function} fn The function to execute
    * @return {object} component The computed component
    */
    transformDescendants: function transformDescendants(component, fn) {
      var childrenList = React.Children.getDescendantsList(component);
      if (childrenList.length === 0) {
        return component;
      } else {
        if (component.props) {
          component.props.children = React.Children.mapDescendants(component, function (childComponent) {
            return React.Children.transformTree(childComponent, fn);
          });
        }
        return component;
      }
    },
    /**
    * <p> Convert all the current descendant of the component using a specified function </p>  
    * @method transformTree
    * @param {object} component The current component 
    * @param {Function} fn The function to execute
    * @return {object} object Call the transformDescendants function in order to convert the subdescendant of the current component
    */
    transformTree: function transformTree(component, fn) {
      component = fn(component);
      return React.Children.transformDescendants(component, fn);
    } });

  React.Children = _patchedReactChildren;

  return _patchedReactChildren;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImQ6L3dvcmtzcGFjZV9yZWZhY3Rvci9yZWFjdC1yYWlscy9zcmMvUi5SZWFjdENoaWxkcmVuLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsT0FBTyxDQUFDLGVBQWUsQ0FBQyxDQUFDO0FBQ3pCLElBQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUNwQyxNQUFNLENBQUMsT0FBTyxHQUFHLFVBQVMsQ0FBQyxFQUFFO0FBQ3pCLE1BQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUMxQixNQUFJLEtBQUssR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDOztBQUVwQixNQUFJLHFCQUFxQixHQUFHLEtBQUssQ0FBQyxRQUFRLENBQUM7Ozs7OztBQU0zQyxNQUFJLHFCQUFxQixHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLEtBQUssQ0FBQyxRQUFRLEVBQUU7Ozs7Ozs7QUFPckQsbUJBQWUsRUFBRSxTQUFTLGVBQWUsQ0FBQyxTQUFTLEVBQUU7QUFDakQsVUFBRyxJQUFJLEtBQUssU0FBUyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFO0FBQ3BFLGVBQU8sRUFBRSxDQUFDO09BQ2I7QUFDRCxhQUFPLEtBQUssQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQztLQUNuRTs7Ozs7OztBQU9ELHNCQUFrQixFQUFFLFNBQVMsa0JBQWtCLENBQUMsU0FBUyxFQUFFO0FBQ3ZELFVBQUksWUFBWSxHQUFHLEtBQUssQ0FBQyxRQUFRLENBQUMsZUFBZSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQzdELFVBQUksZUFBZSxHQUFHLEVBQUUsQ0FBQztBQUN6QixPQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxVQUFTLEtBQUssRUFBRTtBQUNqQyx1QkFBZSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUM1QixZQUFJLGtCQUFrQixHQUFHLEtBQUssQ0FBQyxRQUFRLENBQUMsa0JBQWtCLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDbEUsU0FBQyxDQUFDLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxVQUFTLElBQUksRUFBRTtBQUN0Qyx5QkFBZSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUM5QixDQUFDLENBQUM7T0FDTixDQUFDLENBQUM7QUFDSCxhQUFPLGVBQWUsQ0FBQztLQUMxQjs7Ozs7Ozs7QUFRRCxrQkFBYyxFQUFFLFNBQVMsY0FBYyxDQUFDLFNBQVMsRUFBRSxFQUFFLEVBQUU7QUFDbkQsYUFBTyxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsa0JBQWtCLENBQUMsU0FBUyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7S0FDbEU7Ozs7Ozs7O0FBUUQsV0FBTyxFQUFFLFNBQVMsT0FBTyxDQUFDLFNBQVMsRUFBRSxFQUFFLEVBQUU7QUFDckMsVUFBSSxJQUFJLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQyxrQkFBa0IsQ0FBQyxTQUFTLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDNUQsVUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUN4QixhQUFPLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0tBQzFCOzs7OztBQUtELDBCQUFzQixFQUFFLFNBQVMsc0JBQXNCLEdBQUc7QUFDdEQsV0FBSyxDQUFDLFFBQVEsR0FBRyxxQkFBcUIsQ0FBQztLQUMxQzs7Ozs7Ozs7QUFRRCx3QkFBb0IsRUFBRSxTQUFTLG9CQUFvQixDQUFDLFNBQVMsRUFBRSxFQUFFLEVBQUU7QUFDL0QsVUFBSSxZQUFZLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQyxrQkFBa0IsQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUNoRSxVQUFHLFlBQVksQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO0FBQzFCLGVBQU8sU0FBUyxDQUFDO09BQ3BCLE1BQ0k7QUFDRCxZQUFHLFNBQVMsQ0FBQyxLQUFLLEVBQUM7QUFDZixtQkFBUyxDQUFDLEtBQUssQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsU0FBUyxFQUFFLFVBQVMsY0FBYyxFQUFFO0FBQ3pGLG1CQUFPLEtBQUssQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLGNBQWMsRUFBRSxFQUFFLENBQUMsQ0FBQztXQUMzRCxDQUFDLENBQUM7U0FDTjtBQUNELGVBQU8sU0FBUyxDQUFDO09BQ3BCO0tBQ0o7Ozs7Ozs7O0FBUUQsaUJBQWEsRUFBRSxTQUFTLGFBQWEsQ0FBQyxTQUFTLEVBQUUsRUFBRSxFQUFFO0FBQ2pELGVBQVMsR0FBRyxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDMUIsYUFBTyxLQUFLLENBQUMsUUFBUSxDQUFDLG9CQUFvQixDQUFDLFNBQVMsRUFBRSxFQUFFLENBQUMsQ0FBQztLQUM3RCxFQUNKLENBQUMsQ0FBQzs7QUFFSCxPQUFLLENBQUMsUUFBUSxHQUFHLHFCQUFxQixDQUFDOztBQUV2QyxTQUFPLHFCQUFxQixDQUFDIiwiZmlsZSI6IlIuUmVhY3RDaGlsZHJlbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInJlcXVpcmUoJzZ0bzUvcG9seWZpbGwnKTtcbmNvbnN0IFByb21pc2UgPSByZXF1aXJlKCdibHVlYmlyZCcpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihSKSB7XHJcbiAgICB2YXIgXyA9IHJlcXVpcmUoXCJsb2Rhc2hcIik7XHJcbiAgICB2YXIgUmVhY3QgPSBSLlJlYWN0O1xyXG5cclxuICAgIHZhciBfdmFuaWxsYVJlYWN0Q2hpbGRyZW4gPSBSZWFjdC5DaGlsZHJlbjtcclxuICAgIC8qKlxyXG4gICAgKiA8cD5NZXRob2QgZGVmaW5pdGlvbnMgdGhhdCBjb21wbGVtZW50cyBSZWFjdC5DaGlsZHJlbi4gPGJyIC8+XHJcbiAgICAqIFVzZWQgdG8gbmF2aWdhdGUgdGhyb3VnaCBhbGwgY2hpbGRyZW4gb2YgYSBzcGVjaWZpYyBjb21wb25lbnQgaW4gb3JkZXIgdG8gY2FsY3VsYXRlIGl0cyBkZXNjZW5kYW50cy4gPC9wPlxyXG4gICAgKiBAY2xhc3MgUi5SZWFjdENoaWxkcmVuXHJcbiAgICAqL1xyXG4gICAgdmFyIF9wYXRjaGVkUmVhY3RDaGlsZHJlbiA9IF8uZXh0ZW5kKHt9LCBSZWFjdC5DaGlsZHJlbiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogPHA+UmV0dXJucyB0aGUgY2hpbGQgb2YgdGhlIHNwZWNpZmllZCBjb21wb25lbnQgPC9wPlxyXG4gICAgICAgICogQG1ldGhvZCBnZXRDaGlsZHJlbkxpc3RcclxuICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBjb21wb25lbnQgVGhlIGN1cnJlbnQgY29tcG9uZW50IFxyXG4gICAgICAgICogQHJldHVybiB7b2JqZWN0fSBvYmplY3QgVGhlIGNoaWxkIG9mIHRoZSBzcGVjaWZpZWQgY29tcG9uZW50XHJcbiAgICAgICAgKi9cclxuICAgICAgICBnZXRDaGlsZHJlbkxpc3Q6IGZ1bmN0aW9uIGdldENoaWxkcmVuTGlzdChjb21wb25lbnQpIHtcclxuICAgICAgICAgICAgaWYobnVsbCA9PT0gY29tcG9uZW50IHx8ICFjb21wb25lbnQucHJvcHMgfHwgIWNvbXBvbmVudC5wcm9wcy5jaGlsZHJlbikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5DaGlsZHJlbi5tYXAoY29tcG9uZW50LnByb3BzLmNoaWxkcmVuLCBfLmlkZW50aXR5KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogPHA+UmV0dXJucyBhbGwgY2hpbGRyZW4gb2YgdGhlIHNwZWNpZmllZCBjb21wb25lbnQgPC9wPlxyXG4gICAgICAgICogQG1ldGhvZCBnZXREZXNjZW5kYW50c0xpc3RcclxuICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBjb21wb25lbnQgVGhlIGN1cnJlbnQgY29tcG9uZW50IFxyXG4gICAgICAgICogQHJldHVybiB7b2JqZWN0fSBkZXNjZW5kYW50c0xpc3QgVGhlIGxpc3Qgb2YgY2hpbGRyZW4gb2YgdGhlIHNwZWNpZmllZCBjb21wb25lbnRcclxuICAgICAgICAqL1xyXG4gICAgICAgIGdldERlc2NlbmRhbnRzTGlzdDogZnVuY3Rpb24gZ2V0RGVzY2VuZGFudHNMaXN0KGNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICB2YXIgY2hpbGRyZW5MaXN0ID0gUmVhY3QuQ2hpbGRyZW4uZ2V0Q2hpbGRyZW5MaXN0KGNvbXBvbmVudCk7XHJcbiAgICAgICAgICAgIHZhciBkZXNjZW5kYW50c0xpc3QgPSBbXTtcclxuICAgICAgICAgICAgXy5lYWNoKGNoaWxkcmVuTGlzdCwgZnVuY3Rpb24oY2hpbGQpIHtcclxuICAgICAgICAgICAgICAgIGRlc2NlbmRhbnRzTGlzdC5wdXNoKGNoaWxkKTtcclxuICAgICAgICAgICAgICAgIHZhciBzdWJEZXNjZW5kYW50c0xpc3QgPSBSZWFjdC5DaGlsZHJlbi5nZXREZXNjZW5kYW50c0xpc3QoY2hpbGQpO1xyXG4gICAgICAgICAgICAgICAgXy5lYWNoKHN1YkRlc2NlbmRhbnRzTGlzdCwgZnVuY3Rpb24obm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlc2NlbmRhbnRzTGlzdC5wdXNoKG5vZGUpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gZGVzY2VuZGFudHNMaXN0O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiA8cD5SZXR1cm5zIGFsbCBjaGlsZHJlbiBvZiB0aGUgc3BlY2lmaWVkIGNvbXBvbmVudCBhbmQgZXhlY3V0ZSB0aGUgc3BlY2lmaWVkIGZ1bmN0aW9uIDwvcD5cclxuICAgICAgICAqIEBtZXRob2QgbWFwRGVzY2VuZGFudHNcclxuICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBjb21wb25lbnQgVGhlIGN1cnJlbnQgY29tcG9uZW50IFxyXG4gICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGV4ZWN1dGUgXHJcbiAgICAgICAgKiBAcmV0dXJuIHtvYmplY3R9IG9iamVjdCBUaGUgbGlzdCBvZiBjaGlsZHJlbiBvZiB0aGUgc3BlY2lmaWVkIGNvbXBvbmVudFxyXG4gICAgICAgICovXHJcbiAgICAgICAgbWFwRGVzY2VuZGFudHM6IGZ1bmN0aW9uIG1hcERlc2NlbmRhbnRzKGNvbXBvbmVudCwgZm4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIF8ubWFwKFJlYWN0LkNoaWxkcmVuLmdldERlc2NlbmRhbnRzTGlzdChjb21wb25lbnQpLCBmbik7XHJcbiAgICAgICAgfSxcclxuICAgICAgIC8qKlxyXG4gICAgICAgICogPHA+Q29tcHV0ZSBhbGwgY2hpbGRyZW4gb2YgdGhlIHNwZWNpZmllZCBjb21wb25lbnQgYW5kIGV4ZWN1dGUgdGhlIGZ1bmN0aW9uIDwvcD5cclxuICAgICAgICAqIEBtZXRob2QgbWFwVHJlZVxyXG4gICAgICAgICogQHBhcmFtIHtvYmplY3R9IGNvbXBvbmVudCBUaGUgY3VycmVudCBjb21wb25lbnQgXHJcbiAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gZXhlY3V0ZVxyXG4gICAgICAgICogQHJldHVybiB7b2JqZWN0fSBvYmplY3QgVGhlIGxpc3Qgb2YgY2hpbGRyZW4gd2l0aG91dCB0aGUgY29tcG9uZW50IGFuZCBjYWxsIGZuIGZvciBlYWNoIG9mIHRoZW1cclxuICAgICAgICAqL1xyXG4gICAgICAgIG1hcFRyZWU6IGZ1bmN0aW9uIG1hcFRyZWUoY29tcG9uZW50LCBmbikge1xyXG4gICAgICAgICAgICB2YXIgdHJlZSA9IFJlYWN0LkNoaWxkcmVuLmdldERlc2NlbmRhbnRzTGlzdChjb21wb25lbnQsIGZuKTtcclxuICAgICAgICAgICAgdHJlZS51bnNoaWZ0KGNvbXBvbmVudCk7XHJcbiAgICAgICAgICAgIHJldHVybiBfLm1hcCh0cmVlLCBmbik7XHJcbiAgICAgICAgfSxcclxuICAgICAgICAvKipcclxuICAgICAgICAqIDxwPiBGdW5jdGlvbiB0byB1c2UgaWYgeW91IHdhbnQgcmVzdG9yZSBuYXRpdmUgZnVuY3Rpb24gb2YgUmVhY3QuQ2hpbGRyZW4gPC9wPlxyXG4gICAgICAgICogQG1ldGhvZCByZXN0b3JlVmFuaWxsYUNoaWxkcmVuXHJcbiAgICAgICAgKi9cclxuICAgICAgICByZXN0b3JlVmFuaWxsYUNoaWxkcmVuOiBmdW5jdGlvbiByZXN0b3JlVmFuaWxsYUNoaWxkcmVuKCkge1xyXG4gICAgICAgICAgICBSZWFjdC5DaGlsZHJlbiA9IF92YW5pbGxhUmVhY3RDaGlsZHJlbjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogPHA+IEZ1bmN0aW9uIHRvIHVzZSBpZiB5b3Ugd2FudCBjb252ZXJ0IGFsbCB0aGUgZGVzY2VuZGFudHMgb2YgdGhlIGNvbXBvbmVudCB1c2luZyBhIHNwZWNpZmllZCBmdW5jdGlvbiA8L3A+ICBcclxuICAgICAgICAqIEBtZXRob2QgdHJhbnNmb3JtRGVzY2VuZGFudHNcclxuICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBjb21wb25lbnQgVGhlIGN1cnJlbnQgY29tcG9uZW50IFxyXG4gICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGV4ZWN1dGVcclxuICAgICAgICAqIEByZXR1cm4ge29iamVjdH0gY29tcG9uZW50IFRoZSBjb21wdXRlZCBjb21wb25lbnRcclxuICAgICAgICAqL1xyXG4gICAgICAgIHRyYW5zZm9ybURlc2NlbmRhbnRzOiBmdW5jdGlvbiB0cmFuc2Zvcm1EZXNjZW5kYW50cyhjb21wb25lbnQsIGZuKSB7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZHJlbkxpc3QgPSBSZWFjdC5DaGlsZHJlbi5nZXREZXNjZW5kYW50c0xpc3QoY29tcG9uZW50KTtcclxuICAgICAgICAgICAgaWYoY2hpbGRyZW5MaXN0Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBvbmVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmKGNvbXBvbmVudC5wcm9wcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50LnByb3BzLmNoaWxkcmVuID0gUmVhY3QuQ2hpbGRyZW4ubWFwRGVzY2VuZGFudHMoY29tcG9uZW50LCBmdW5jdGlvbihjaGlsZENvbXBvbmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmVhY3QuQ2hpbGRyZW4udHJhbnNmb3JtVHJlZShjaGlsZENvbXBvbmVudCwgZm4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBvbmVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiA8cD4gQ29udmVydCBhbGwgdGhlIGN1cnJlbnQgZGVzY2VuZGFudCBvZiB0aGUgY29tcG9uZW50IHVzaW5nIGEgc3BlY2lmaWVkIGZ1bmN0aW9uIDwvcD4gIFxyXG4gICAgICAgICogQG1ldGhvZCB0cmFuc2Zvcm1UcmVlXHJcbiAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gY29tcG9uZW50IFRoZSBjdXJyZW50IGNvbXBvbmVudCBcclxuICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBleGVjdXRlXHJcbiAgICAgICAgKiBAcmV0dXJuIHtvYmplY3R9IG9iamVjdCBDYWxsIHRoZSB0cmFuc2Zvcm1EZXNjZW5kYW50cyBmdW5jdGlvbiBpbiBvcmRlciB0byBjb252ZXJ0IHRoZSBzdWJkZXNjZW5kYW50IG9mIHRoZSBjdXJyZW50IGNvbXBvbmVudFxyXG4gICAgICAgICovXHJcbiAgICAgICAgdHJhbnNmb3JtVHJlZTogZnVuY3Rpb24gdHJhbnNmb3JtVHJlZShjb21wb25lbnQsIGZuKSB7XHJcbiAgICAgICAgICAgIGNvbXBvbmVudCA9IGZuKGNvbXBvbmVudCk7XHJcbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5DaGlsZHJlbi50cmFuc2Zvcm1EZXNjZW5kYW50cyhjb21wb25lbnQsIGZuKTtcclxuICAgICAgICB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgUmVhY3QuQ2hpbGRyZW4gPSBfcGF0Y2hlZFJlYWN0Q2hpbGRyZW47XHJcblxyXG4gICAgcmV0dXJuIF9wYXRjaGVkUmVhY3RDaGlsZHJlbjtcclxufTtcclxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9