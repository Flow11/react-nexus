"use strict";

require("6to5/polyfill");
var Promise = require("bluebird");
module.exports = function (R) {
  var _ = require("lodash");
  var React = R.React;

  var _vanillaReactChildren = React.Children;
  /**
  * <p>Method definitions that complements React.Children. <br />
  * Used to navigate through all children of a specific component in order to calculate its descendants. </p>
  * @class R.ReactChildren
  */
  var _patchedReactChildren = _.extend({}, React.Children, {
    /**
    * <p>Returns the child of the specified component </p>
    * @method getChildrenList
    * @param {object} component The current component 
    * @return {object} object The child of the specified component
    */
    getChildrenList: function getChildrenList(component) {
      if (null === component || !component.props || !component.props.children) {
        return [];
      }
      return React.Children.map(component.props.children, _.identity);
    },
    /**
    * <p>Returns all children of the specified component </p>
    * @method getDescendantsList
    * @param {object} component The current component 
    * @return {object} descendantsList The list of children of the specified component
    */
    getDescendantsList: function getDescendantsList(component) {
      var childrenList = React.Children.getChildrenList(component);
      var descendantsList = [];
      _.each(childrenList, function (child) {
        descendantsList.push(child);
        var subDescendantsList = React.Children.getDescendantsList(child);
        _.each(subDescendantsList, function (node) {
          descendantsList.push(node);
        });
      });
      return descendantsList;
    },
    /**
    * <p>Returns all children of the specified component and execute the specified function </p>
    * @method mapDescendants
    * @param {object} component The current component 
    * @param {Function} fn The function to execute 
    * @return {object} object The list of children of the specified component
    */
    mapDescendants: function mapDescendants(component, fn) {
      return _.map(React.Children.getDescendantsList(component), fn);
    },
    /**
     * <p>Compute all children of the specified component and execute the function </p>
     * @method mapTree
     * @param {object} component The current component 
     * @param {Function} fn The function to execute
     * @return {object} object The list of children without the component and call fn for each of them
     */
    mapTree: function mapTree(component, fn) {
      var tree = React.Children.getDescendantsList(component, fn);
      tree.unshift(component);
      return _.map(tree, fn);
    },
    /**
    * <p> Function to use if you want restore native function of React.Children </p>
    * @method restoreVanillaChildren
    */
    restoreVanillaChildren: function restoreVanillaChildren() {
      React.Children = _vanillaReactChildren;
    },
    /**
    * <p> Function to use if you want convert all the descendants of the component using a specified function </p>  
    * @method transformDescendants
    * @param {object} component The current component 
    * @param {Function} fn The function to execute
    * @return {object} component The computed component
    */
    transformDescendants: function transformDescendants(component, fn) {
      var childrenList = React.Children.getDescendantsList(component);
      if (childrenList.length === 0) {
        return component;
      } else {
        if (component.props) {
          component.props.children = React.Children.mapDescendants(component, function (childComponent) {
            return React.Children.transformTree(childComponent, fn);
          });
        }
        return component;
      }
    },
    /**
    * <p> Convert all the current descendant of the component using a specified function </p>  
    * @method transformTree
    * @param {object} component The current component 
    * @param {Function} fn The function to execute
    * @return {object} object Call the transformDescendants function in order to convert the subdescendant of the current component
    */
    transformTree: function transformTree(component, fn) {
      component = fn(component);
      return React.Children.transformDescendants(component, fn);
    } });

  React.Children = _patchedReactChildren;

  return _patchedReactChildren;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImY6L1VzZXJzL0VsaWUvZ2l0L3JlYWN0L3JlYWN0LXJhaWxzL3NyYy9SLlJlYWN0Q2hpbGRyZW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxPQUFPLENBQUMsZUFBZSxDQUFDLENBQUM7QUFDekIsSUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ3BDLE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBUyxDQUFDLEVBQUU7QUFDekIsTUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzFCLE1BQUksS0FBSyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUM7O0FBRXBCLE1BQUkscUJBQXFCLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQzs7Ozs7O0FBTTNDLE1BQUkscUJBQXFCLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsS0FBSyxDQUFDLFFBQVEsRUFBRTs7Ozs7OztBQU9yRCxtQkFBZSxFQUFFLFNBQVMsZUFBZSxDQUFDLFNBQVMsRUFBRTtBQUNqRCxVQUFHLElBQUksS0FBSyxTQUFTLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUU7QUFDcEUsZUFBTyxFQUFFLENBQUM7T0FDYjtBQUNELGFBQU8sS0FBSyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0tBQ25FOzs7Ozs7O0FBT0Qsc0JBQWtCLEVBQUUsU0FBUyxrQkFBa0IsQ0FBQyxTQUFTLEVBQUU7QUFDdkQsVUFBSSxZQUFZLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDN0QsVUFBSSxlQUFlLEdBQUcsRUFBRSxDQUFDO0FBQ3pCLE9BQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFLFVBQVMsS0FBSyxFQUFFO0FBQ2pDLHVCQUFlLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQzVCLFlBQUksa0JBQWtCLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQyxrQkFBa0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNsRSxTQUFDLENBQUMsSUFBSSxDQUFDLGtCQUFrQixFQUFFLFVBQVMsSUFBSSxFQUFFO0FBQ3RDLHlCQUFlLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQzlCLENBQUMsQ0FBQztPQUNOLENBQUMsQ0FBQztBQUNILGFBQU8sZUFBZSxDQUFDO0tBQzFCOzs7Ozs7OztBQVFELGtCQUFjLEVBQUUsU0FBUyxjQUFjLENBQUMsU0FBUyxFQUFFLEVBQUUsRUFBRTtBQUNuRCxhQUFPLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxrQkFBa0IsQ0FBQyxTQUFTLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztLQUNsRTs7Ozs7Ozs7QUFRRCxXQUFPLEVBQUUsU0FBUyxPQUFPLENBQUMsU0FBUyxFQUFFLEVBQUUsRUFBRTtBQUNyQyxVQUFJLElBQUksR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDLGtCQUFrQixDQUFDLFNBQVMsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUM1RCxVQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQ3hCLGFBQU8sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLENBQUM7S0FDMUI7Ozs7O0FBS0QsMEJBQXNCLEVBQUUsU0FBUyxzQkFBc0IsR0FBRztBQUN0RCxXQUFLLENBQUMsUUFBUSxHQUFHLHFCQUFxQixDQUFDO0tBQzFDOzs7Ozs7OztBQVFELHdCQUFvQixFQUFFLFNBQVMsb0JBQW9CLENBQUMsU0FBUyxFQUFFLEVBQUUsRUFBRTtBQUMvRCxVQUFJLFlBQVksR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDLGtCQUFrQixDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQ2hFLFVBQUcsWUFBWSxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7QUFDMUIsZUFBTyxTQUFTLENBQUM7T0FDcEIsTUFDSTtBQUNELFlBQUcsU0FBUyxDQUFDLEtBQUssRUFBQztBQUNmLG1CQUFTLENBQUMsS0FBSyxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxTQUFTLEVBQUUsVUFBUyxjQUFjLEVBQUU7QUFDekYsbUJBQU8sS0FBSyxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsY0FBYyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1dBQzNELENBQUMsQ0FBQztTQUNOO0FBQ0QsZUFBTyxTQUFTLENBQUM7T0FDcEI7S0FDSjs7Ozs7Ozs7QUFRRCxpQkFBYSxFQUFFLFNBQVMsYUFBYSxDQUFDLFNBQVMsRUFBRSxFQUFFLEVBQUU7QUFDakQsZUFBUyxHQUFHLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUMxQixhQUFPLEtBQUssQ0FBQyxRQUFRLENBQUMsb0JBQW9CLENBQUMsU0FBUyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0tBQzdELEVBQ0osQ0FBQyxDQUFDOztBQUVILE9BQUssQ0FBQyxRQUFRLEdBQUcscUJBQXFCLENBQUM7O0FBRXZDLFNBQU8scUJBQXFCLENBQUMiLCJmaWxlIjoiUi5SZWFjdENoaWxkcmVuLmpzIiwic291cmNlc0NvbnRlbnQiOlsicmVxdWlyZSgnNnRvNS9wb2x5ZmlsbCcpO1xuY29uc3QgUHJvbWlzZSA9IHJlcXVpcmUoJ2JsdWViaXJkJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFIpIHtcclxuICAgIHZhciBfID0gcmVxdWlyZShcImxvZGFzaFwiKTtcclxuICAgIHZhciBSZWFjdCA9IFIuUmVhY3Q7XHJcblxyXG4gICAgdmFyIF92YW5pbGxhUmVhY3RDaGlsZHJlbiA9IFJlYWN0LkNoaWxkcmVuO1xyXG4gICAgLyoqXHJcbiAgICAqIDxwPk1ldGhvZCBkZWZpbml0aW9ucyB0aGF0IGNvbXBsZW1lbnRzIFJlYWN0LkNoaWxkcmVuLiA8YnIgLz5cclxuICAgICogVXNlZCB0byBuYXZpZ2F0ZSB0aHJvdWdoIGFsbCBjaGlsZHJlbiBvZiBhIHNwZWNpZmljIGNvbXBvbmVudCBpbiBvcmRlciB0byBjYWxjdWxhdGUgaXRzIGRlc2NlbmRhbnRzLiA8L3A+XHJcbiAgICAqIEBjbGFzcyBSLlJlYWN0Q2hpbGRyZW5cclxuICAgICovXHJcbiAgICB2YXIgX3BhdGNoZWRSZWFjdENoaWxkcmVuID0gXy5leHRlbmQoe30sIFJlYWN0LkNoaWxkcmVuLCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiA8cD5SZXR1cm5zIHRoZSBjaGlsZCBvZiB0aGUgc3BlY2lmaWVkIGNvbXBvbmVudCA8L3A+XHJcbiAgICAgICAgKiBAbWV0aG9kIGdldENoaWxkcmVuTGlzdFxyXG4gICAgICAgICogQHBhcmFtIHtvYmplY3R9IGNvbXBvbmVudCBUaGUgY3VycmVudCBjb21wb25lbnQgXHJcbiAgICAgICAgKiBAcmV0dXJuIHtvYmplY3R9IG9iamVjdCBUaGUgY2hpbGQgb2YgdGhlIHNwZWNpZmllZCBjb21wb25lbnRcclxuICAgICAgICAqL1xyXG4gICAgICAgIGdldENoaWxkcmVuTGlzdDogZnVuY3Rpb24gZ2V0Q2hpbGRyZW5MaXN0KGNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICBpZihudWxsID09PSBjb21wb25lbnQgfHwgIWNvbXBvbmVudC5wcm9wcyB8fCAhY29tcG9uZW50LnByb3BzLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LkNoaWxkcmVuLm1hcChjb21wb25lbnQucHJvcHMuY2hpbGRyZW4sIF8uaWRlbnRpdHkpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiA8cD5SZXR1cm5zIGFsbCBjaGlsZHJlbiBvZiB0aGUgc3BlY2lmaWVkIGNvbXBvbmVudCA8L3A+XHJcbiAgICAgICAgKiBAbWV0aG9kIGdldERlc2NlbmRhbnRzTGlzdFxyXG4gICAgICAgICogQHBhcmFtIHtvYmplY3R9IGNvbXBvbmVudCBUaGUgY3VycmVudCBjb21wb25lbnQgXHJcbiAgICAgICAgKiBAcmV0dXJuIHtvYmplY3R9IGRlc2NlbmRhbnRzTGlzdCBUaGUgbGlzdCBvZiBjaGlsZHJlbiBvZiB0aGUgc3BlY2lmaWVkIGNvbXBvbmVudFxyXG4gICAgICAgICovXHJcbiAgICAgICAgZ2V0RGVzY2VuZGFudHNMaXN0OiBmdW5jdGlvbiBnZXREZXNjZW5kYW50c0xpc3QoY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZHJlbkxpc3QgPSBSZWFjdC5DaGlsZHJlbi5nZXRDaGlsZHJlbkxpc3QoY29tcG9uZW50KTtcclxuICAgICAgICAgICAgdmFyIGRlc2NlbmRhbnRzTGlzdCA9IFtdO1xyXG4gICAgICAgICAgICBfLmVhY2goY2hpbGRyZW5MaXN0LCBmdW5jdGlvbihjaGlsZCkge1xyXG4gICAgICAgICAgICAgICAgZGVzY2VuZGFudHNMaXN0LnB1c2goY2hpbGQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN1YkRlc2NlbmRhbnRzTGlzdCA9IFJlYWN0LkNoaWxkcmVuLmdldERlc2NlbmRhbnRzTGlzdChjaGlsZCk7XHJcbiAgICAgICAgICAgICAgICBfLmVhY2goc3ViRGVzY2VuZGFudHNMaXN0LCBmdW5jdGlvbihub2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVzY2VuZGFudHNMaXN0LnB1c2gobm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBkZXNjZW5kYW50c0xpc3Q7XHJcbiAgICAgICAgfSxcclxuICAgICAgICAvKipcclxuICAgICAgICAqIDxwPlJldHVybnMgYWxsIGNoaWxkcmVuIG9mIHRoZSBzcGVjaWZpZWQgY29tcG9uZW50IGFuZCBleGVjdXRlIHRoZSBzcGVjaWZpZWQgZnVuY3Rpb24gPC9wPlxyXG4gICAgICAgICogQG1ldGhvZCBtYXBEZXNjZW5kYW50c1xyXG4gICAgICAgICogQHBhcmFtIHtvYmplY3R9IGNvbXBvbmVudCBUaGUgY3VycmVudCBjb21wb25lbnQgXHJcbiAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gZXhlY3V0ZSBcclxuICAgICAgICAqIEByZXR1cm4ge29iamVjdH0gb2JqZWN0IFRoZSBsaXN0IG9mIGNoaWxkcmVuIG9mIHRoZSBzcGVjaWZpZWQgY29tcG9uZW50XHJcbiAgICAgICAgKi9cclxuICAgICAgICBtYXBEZXNjZW5kYW50czogZnVuY3Rpb24gbWFwRGVzY2VuZGFudHMoY29tcG9uZW50LCBmbikge1xyXG4gICAgICAgICAgICByZXR1cm4gXy5tYXAoUmVhY3QuQ2hpbGRyZW4uZ2V0RGVzY2VuZGFudHNMaXN0KGNvbXBvbmVudCksIGZuKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgLyoqXHJcbiAgICAgICAgKiA8cD5Db21wdXRlIGFsbCBjaGlsZHJlbiBvZiB0aGUgc3BlY2lmaWVkIGNvbXBvbmVudCBhbmQgZXhlY3V0ZSB0aGUgZnVuY3Rpb24gPC9wPlxyXG4gICAgICAgICogQG1ldGhvZCBtYXBUcmVlXHJcbiAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gY29tcG9uZW50IFRoZSBjdXJyZW50IGNvbXBvbmVudCBcclxuICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBleGVjdXRlXHJcbiAgICAgICAgKiBAcmV0dXJuIHtvYmplY3R9IG9iamVjdCBUaGUgbGlzdCBvZiBjaGlsZHJlbiB3aXRob3V0IHRoZSBjb21wb25lbnQgYW5kIGNhbGwgZm4gZm9yIGVhY2ggb2YgdGhlbVxyXG4gICAgICAgICovXHJcbiAgICAgICAgbWFwVHJlZTogZnVuY3Rpb24gbWFwVHJlZShjb21wb25lbnQsIGZuKSB7XHJcbiAgICAgICAgICAgIHZhciB0cmVlID0gUmVhY3QuQ2hpbGRyZW4uZ2V0RGVzY2VuZGFudHNMaXN0KGNvbXBvbmVudCwgZm4pO1xyXG4gICAgICAgICAgICB0cmVlLnVuc2hpZnQoY29tcG9uZW50KTtcclxuICAgICAgICAgICAgcmV0dXJuIF8ubWFwKHRyZWUsIGZuKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogPHA+IEZ1bmN0aW9uIHRvIHVzZSBpZiB5b3Ugd2FudCByZXN0b3JlIG5hdGl2ZSBmdW5jdGlvbiBvZiBSZWFjdC5DaGlsZHJlbiA8L3A+XHJcbiAgICAgICAgKiBAbWV0aG9kIHJlc3RvcmVWYW5pbGxhQ2hpbGRyZW5cclxuICAgICAgICAqL1xyXG4gICAgICAgIHJlc3RvcmVWYW5pbGxhQ2hpbGRyZW46IGZ1bmN0aW9uIHJlc3RvcmVWYW5pbGxhQ2hpbGRyZW4oKSB7XHJcbiAgICAgICAgICAgIFJlYWN0LkNoaWxkcmVuID0gX3ZhbmlsbGFSZWFjdENoaWxkcmVuO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiA8cD4gRnVuY3Rpb24gdG8gdXNlIGlmIHlvdSB3YW50IGNvbnZlcnQgYWxsIHRoZSBkZXNjZW5kYW50cyBvZiB0aGUgY29tcG9uZW50IHVzaW5nIGEgc3BlY2lmaWVkIGZ1bmN0aW9uIDwvcD4gIFxyXG4gICAgICAgICogQG1ldGhvZCB0cmFuc2Zvcm1EZXNjZW5kYW50c1xyXG4gICAgICAgICogQHBhcmFtIHtvYmplY3R9IGNvbXBvbmVudCBUaGUgY3VycmVudCBjb21wb25lbnQgXHJcbiAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gZXhlY3V0ZVxyXG4gICAgICAgICogQHJldHVybiB7b2JqZWN0fSBjb21wb25lbnQgVGhlIGNvbXB1dGVkIGNvbXBvbmVudFxyXG4gICAgICAgICovXHJcbiAgICAgICAgdHJhbnNmb3JtRGVzY2VuZGFudHM6IGZ1bmN0aW9uIHRyYW5zZm9ybURlc2NlbmRhbnRzKGNvbXBvbmVudCwgZm4pIHtcclxuICAgICAgICAgICAgdmFyIGNoaWxkcmVuTGlzdCA9IFJlYWN0LkNoaWxkcmVuLmdldERlc2NlbmRhbnRzTGlzdChjb21wb25lbnQpO1xyXG4gICAgICAgICAgICBpZihjaGlsZHJlbkxpc3QubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tcG9uZW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYoY29tcG9uZW50LnByb3BzKXtcclxuICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQucHJvcHMuY2hpbGRyZW4gPSBSZWFjdC5DaGlsZHJlbi5tYXBEZXNjZW5kYW50cyhjb21wb25lbnQsIGZ1bmN0aW9uKGNoaWxkQ29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBSZWFjdC5DaGlsZHJlbi50cmFuc2Zvcm1UcmVlKGNoaWxkQ29tcG9uZW50LCBmbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tcG9uZW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICAvKipcclxuICAgICAgICAqIDxwPiBDb252ZXJ0IGFsbCB0aGUgY3VycmVudCBkZXNjZW5kYW50IG9mIHRoZSBjb21wb25lbnQgdXNpbmcgYSBzcGVjaWZpZWQgZnVuY3Rpb24gPC9wPiAgXHJcbiAgICAgICAgKiBAbWV0aG9kIHRyYW5zZm9ybVRyZWVcclxuICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBjb21wb25lbnQgVGhlIGN1cnJlbnQgY29tcG9uZW50IFxyXG4gICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGV4ZWN1dGVcclxuICAgICAgICAqIEByZXR1cm4ge29iamVjdH0gb2JqZWN0IENhbGwgdGhlIHRyYW5zZm9ybURlc2NlbmRhbnRzIGZ1bmN0aW9uIGluIG9yZGVyIHRvIGNvbnZlcnQgdGhlIHN1YmRlc2NlbmRhbnQgb2YgdGhlIGN1cnJlbnQgY29tcG9uZW50XHJcbiAgICAgICAgKi9cclxuICAgICAgICB0cmFuc2Zvcm1UcmVlOiBmdW5jdGlvbiB0cmFuc2Zvcm1UcmVlKGNvbXBvbmVudCwgZm4pIHtcclxuICAgICAgICAgICAgY29tcG9uZW50ID0gZm4oY29tcG9uZW50KTtcclxuICAgICAgICAgICAgcmV0dXJuIFJlYWN0LkNoaWxkcmVuLnRyYW5zZm9ybURlc2NlbmRhbnRzKGNvbXBvbmVudCwgZm4pO1xyXG4gICAgICAgIH0sXHJcbiAgICB9KTtcclxuXHJcbiAgICBSZWFjdC5DaGlsZHJlbiA9IF9wYXRjaGVkUmVhY3RDaGlsZHJlbjtcclxuXHJcbiAgICByZXR1cm4gX3BhdGNoZWRSZWFjdENoaWxkcmVuO1xyXG59O1xyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=